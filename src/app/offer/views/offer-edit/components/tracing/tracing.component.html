<div class="mt-3 flex justify-content-end">
    <button pButton id="create-offer" class="" (click)="createTracing()">Nuevo documento</button>
</div>
<p-table [value]="data.tracings" [lazy]="true" scrollable="true" scrollHeight="calc(50vh - 202px)"
    responsiveLayout="scroll" editMode="row" selectionMode="single" rowIndexVar="rowIndex" dataKey="uuid">
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="person">Persona<p-sortIcon field="person"></p-sortIcon>
            </th>
            <th pSortableColumn="comment">Comentario<p-sortIcon field="comment"></p-sortIcon>
            </th>
            <th pSortableColumn="date">Fecha<p-sortIcon field="date"></p-sortIcon>
            </th>
            <th>Editar</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-tracings let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="tracings">
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-autoComplete [suggestions]="groupPerson" [(ngModel)]="selectedPerson" appendTo="body"
                            [forceSelection]="true" [showEmptyMessage]="true" [emptyMessage]="message"
                            inputStyleClass="w-full" (completeMethod)="searchPerson($event)"
                            (onSelect)="tracings.person=$event.value" field="field" required>
                        </p-autoComplete>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{transformPerson(tracings.person)}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="tracings.comment" required>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{tracings.comment}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-calendar [showIcon]="true" styleClass="w-full" appendTo="body" [(ngModel)]="tracings.date"
                            dateFormat="yy-mm-dd" required></p-calendar>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{tracings.date | date: "yyyy-mm-dd"}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <button *ngIf="!editing && !isEditing" pButton pRipple type="button" pInitEditableRow
                    icon="pi pi-pencil" (click)="onRowEditInit(tracings)"
                    class="p-button-rounded p-button-text"></button>
                <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
                    class="p-button-rounded p-button-text p-button-success mr-2" (click)="isEditing=false"></button>
                <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                    (click)="onRowEditCancel(ri)" class="p-button-rounded p-button-text p-button-danger"></button>
            </td>
        </tr>
    </ng-template>
</p-table>