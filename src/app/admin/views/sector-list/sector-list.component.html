<p-toast position="top-center"></p-toast>
<p-confirmDialog header="Confirmation" [closable]="false" icon="pi pi-exclamation-triangle" [transitionOptions]="'0ms'">
    <ng-template pTemplate="footer">
        <button type="button" pButton label="Cerrar" class="p-button-secondary" (click)="closeDialog()"></button>
        <button type="button" pButton label="Borrar" class="p-button-primary" (click)="confirmDeletion()"></button>
    </ng-template>
</p-confirmDialog>
<p-table [value]="sectors"
        rowGroupMode="subheader"
        [scrollable]="true"
        groupRowsBy="active"
        sortField="active"
        sortOrder="-1"
        [loading]="isLoading"
        scrollHeight="calc(100vh - 184px)"
        responsiveLayout="scroll">
            <ng-template pTemplate="groupheader" let-sector>
                <tr pRowGroupHeader style="background: rgb(234, 234, 234);">
                    <td colspan="5">
                        <ng-container *ngIf="sector.active == true; else inactive">
                            <span class="font-bold ml-2">Sectores activos:</span>
                          </ng-container>
                          <ng-template #inactive>
                            <span class="font-bold ml-2">Sectores inactivos:</span>
                          </ng-template>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="name">Nombre<p-sortIcon field="name"></p-sortIcon>  </th>
                <th style="flex: 0 0 150px" pSortableColumn="priority" >Prioridad <p-sortIcon field="priority"></p-sortIcon></th>
                <th style="flex: 0 0 150px" pSortableColumn="startDate" >Fecha inicio <p-sortIcon field="startDate"></p-sortIcon></th>
                <th style="flex: 0 0 150px" pSortableColumn="endDate" >Fecha final<p-sortIcon field="endDate"></p-sortIcon></th>
                <th style="flex: 0 0 150px">Acci√≥n</th>
            </tr>
            </ng-template>
            <ng-template pTemplate="body" let-sector>
                <tr>
                    <td>{{sector.name}}</td>
                    <td style="flex: 0 0 150px">{{sector.priority}}</td>
                    <td style="flex: 0 0 150px">{{sector.startDate | date:'dd/MM/yyyy'}}</td>
                    <td style="flex: 0 0 150px">{{sector.endDate | date:'dd/MM/yyyy'}}</td>
                    <td style="flex: 0 0 150px">
                        <button pButton type="button" icon="pi pi-pencil" pTooltip="Editar sector" tooltipPosition="top" (click)="editSector(sector)"
                            class="p-button-rounded p-button-text p-button-plain icon"></button>
                        <button pButton type="button" icon="pi pi-trash" pTooltip="Borrar sector" tooltipPosition="top" (click)="showDeleteDialog(sector)"
                            class="p-button-rounded p-button-text p-button-plain icon"></button>
                    </td>
                </tr>
            </ng-template>
</p-table>

<div  class="mt-3 flex justify-content-end">
    <button pButton type="button" class="p-3" (click)="editSector()" label="Nuevo sector"></button>  
</div>